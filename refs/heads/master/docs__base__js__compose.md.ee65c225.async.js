(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[36],{"8Z4P":function(n,e,a){"use strict";a.r(e);var c=a("q1tI"),t=a.n(c),l=a("dEAq"),r=a("H1Ra");a("JjdP");e["default"]=n=>(t.a.useEffect((()=>{var e;null!==n&&void 0!==n&&null!==(e=n.location)&&void 0!==e&&e.hash&&l["AnchorLink"].scrollToAnchor(decodeURIComponent(n.location.hash.slice(1)))}),[]),t.a.createElement(t.a.Fragment,null,t.a.createElement("div",{className:"markdown"},t.a.createElement("h1",{id:"\u51fd\u6570\u7ec4\u5408-compose"},t.a.createElement(l["AnchorLink"],{to:"#\u51fd\u6570\u7ec4\u5408-compose","aria-hidden":"true",tabIndex:-1},t.a.createElement("span",{className:"icon icon-link"})),"\u51fd\u6570\u7ec4\u5408 compose"),t.a.createElement("h2",{id:"1\u5b9a\u4e49"},t.a.createElement(l["AnchorLink"],{to:"#1\u5b9a\u4e49","aria-hidden":"true",tabIndex:-1},t.a.createElement("span",{className:"icon icon-link"})),"1.\u5b9a\u4e49"),t.a.createElement("ul",null,t.a.createElement("li",null,t.a.createElement("p",null,"compose \u51fd\u6570\u53ef\u4ee5\u5c06\u9700\u8981\u5d4c\u5957\u6267\u884c\u7684\u51fd\u6570\u5e73\u94fa\uff0c\u5d4c\u5957\u6267\u884c\u5c31\u662f\u4e00\u4e2a\u51fd\u6570\u7684\u8fd4\u56de\u503c\u5c06\u4f5c\u4e3a\u53e6\u4e00\u4e2a\u51fd\u6570\u7684\u53c2\u6570")),t.a.createElement("li",null,t.a.createElement("p",null,"\u628a\u591a\u5c42\u51fd\u6570\u5d4c\u5957\u8c03\u7528\u6241\u5e73\u5316"))),t.a.createElement("h2",{id:"2\u5b9e\u73b0"},t.a.createElement(l["AnchorLink"],{to:"#2\u5b9e\u73b0","aria-hidden":"true",tabIndex:-1},t.a.createElement("span",{className:"icon icon-link"})),"2.\u5b9e\u73b0"),t.a.createElement("ul",null,t.a.createElement("li",null,"compose \u51fd\u6570\u5e38\u57fa\u4e8e ",t.a.createElement("code",null,"reduce")," ",t.a.createElement("code",null,"\u67ef\u7406\u5316\u51fd\u6570"),"\u601d\u60f3\u89e3\u51b3 ",t.a.createElement("code",null,"\u51fd\u6570\u8c03\u7528\u6241\u5e73\u5316"),"\u7684\u95ee\u9898")),t.a.createElement("h2",{id:"3\u95ee\u9898"},t.a.createElement(l["AnchorLink"],{to:"#3\u95ee\u9898","aria-hidden":"true",tabIndex:-1},t.a.createElement("span",{className:"icon icon-link"})),"3.\u95ee\u9898"),t.a.createElement("ul",null,t.a.createElement("li",null,t.a.createElement("strong",null,"\u5c42\u7ea7\u5d4c\u5957\u8f83\u6df1"))),t.a.createElement(r["a"],{code:"const fn1 = (x) => x + 10;\nconst fn2 = (x) => x - 10;\nconst fn3 = (x) => x * 10;\nconst fn4 = (x) => x / 10;\n\nconsole.log(fn3(fn1(fn2(fn1(4)))));",lang:"js"}),t.a.createElement("h2",{id:"4\u89e3\u51b3"},t.a.createElement(l["AnchorLink"],{to:"#4\u89e3\u51b3","aria-hidden":"true",tabIndex:-1},t.a.createElement("span",{className:"icon icon-link"})),"4.\u89e3\u51b3"),t.a.createElement("ul",null,t.a.createElement("li",null,t.a.createElement("strong",null,"\u51fd\u6570\u8c03\u7528\u6241\u5e73\u5316\uff1a")," \u5982\u679c\u662f\u591a\u5c42\u7ea7\u5d4c\u5957\u8c03\u7528\u7684\u51fd\u6570\uff0c\u628a\u4e00\u4e2a\u51fd\u6570\u8c03\u7528\u5b8c\uff0c\u5f53\u4f5c\u53e6\u4e00\u4e2a\u51fd\u6570\u7684\u5b9e\u53c2\u4f20\u9012\u5230\u4e0b\u4e00\u4e2a\u51fd\u6570\u4e2d")),t.a.createElement(r["a"],{code:"/**\n * @param  funcs \u5b58\u50a8\u6309\u7167\u987a\u5e8f\u6267\u884c\u7684\u51fd\u6570(\u6570\u7ec4) => [fn1, fn3, fn2, fn4]\n * @param  args \u5b58\u50a8\u7b2c\u4e00\u4e2a\u51fd\u6570\u6267\u884c\u9700\u8981\u4f20\u9012\u7684\u5b9e\u53c2\u4fe1\u606f(\u6570\u7ec4) => [5]\n */\nfunction compose(...funcs) {\n  return function anonymous(...args) {\n    if (funcs.length === 0) return args;\n    if (funcs.length === 1) return funcs[0](...args);\n    // funcs \u91cc\u6709 \u591a\u4e2a\u51fd\u6570\u65f6\n    return funcs.reduce((n, func) => {\n      // \u7b2c\u4e00\u6b21\u6267\u884c\uff1a\n      // n\uff1a\u7b2c\u4e00\u4e2a\u51fd\u6570\u6267\u884c\u7684\u5b9e\u53c2 func\uff1a\u7b2c\u4e00\u4e2a\u51fd\u6570\n      // \u7b2c\u4e8c\u6b21\u6267\u884c\uff1a\n      // n\u7684\u503c\uff1a\u4e0a\u4e00\u6b21func\u6267\u884c\u540e\u7684\u8fd4\u56de\u503c\uff0c\u4f5c\u4e3a\u5b9e\u53c2\u4f20\u9012\u7ed9\u4e0b\u4e00\u4e2a\u51fd\u6570\u6267\u884c func\uff1a\u7b2c\u4e8c\u4e2a\u51fd\u6570\n      return Array.isArray(n) ? func(...n) : func(n);\n    }, args);\n  };\n}\n\nconst fn1 = (x) => x + 10;\nconst fn2 = (x) => x - 10;\nconst fn3 = (x) => x * 10;\nconst fn4 = (x) => x / 10;\n\n// let res = compose(fn1, fn3, fn2, fn4)(5);\n\n// \u6267\u884c\u8fc7\u7a0b\uff1a\nconsole.log(compose()(5)); // [5]\nconsole.log(compose(fn1)(5)); // 5+10 = 15\nconsole.log(compose(fn1, fn3)(5)); // fn1(5)=15 fn3(15)=150\nconsole.log(compose(fn1, fn3, fn2)(5)); // fn1(5)=15 fn3(15)=150 fn2(150)=140\nconsole.log(compose(fn1, fn3, fn2, fn4)(5)); // fn1(5)=15 fn3(15)=150 fn2(150)=140 fn4(140)=14",lang:"js"}),t.a.createElement("p",null,t.a.createElement("strong",null,"\u6bcf\u4e00\u6b21\u51fd\u6570\u8c03\u7528\u7684\u53c2\u6570\u90fd\u662f\u524d\u4e00\u4e2a\u51fd\u6570\u8fd4\u56de\u7684\u7ed3\u679c\uff0c\u4f7f\u7528 reduce")),t.a.createElement("h2",{id:"5redux-\u4e2d-compose-\u7684\u5b9e\u73b0"},t.a.createElement(l["AnchorLink"],{to:"#5redux-\u4e2d-compose-\u7684\u5b9e\u73b0","aria-hidden":"true",tabIndex:-1},t.a.createElement("span",{className:"icon icon-link"})),"5.redux \u4e2d compose \u7684\u5b9e\u73b0"),t.a.createElement(r["a"],{code:"function compose(...funcs) {\n  if (funcs.length === 0) {\n    return (arg) => arg;\n  }\n\n  if (funcs.length === 1) {\n    return funcs[0];\n  }\n  debugger;\n  return funcs.reduce(\n    (a, b) =>\n      (...args) =>\n        a(b(...args)),\n  );\n}",lang:"js"}),t.a.createElement("ul",null,t.a.createElement("li",null,"\u5b9e\u73b0\u539f\u7406: \u4fc4\u7f57\u65af\u5957\u5a03")),t.a.createElement(r["a"],{code:"function aa() {\n  console.log(11);\n}\n\nfunction bb() {\n  console.log(22);\n}\nfunction cc() {\n  console.log(33);\n}\naa(bb(cc()));\n// 33\n// 22\n// 11",lang:"js"}),t.a.createElement("h2",{id:"6pipe-\u51fd\u6570"},t.a.createElement(l["AnchorLink"],{to:"#6pipe-\u51fd\u6570","aria-hidden":"true",tabIndex:-1},t.a.createElement("span",{className:"icon icon-link"})),"6.pipe \u51fd\u6570"),t.a.createElement("ul",null,t.a.createElement("li",null,"pipe \u51fd\u6570\u8ddf compose \u51fd\u6570\u7684\u4f5c\u7528\u662f\u4e00\u6837\u7684\uff0c\u4e5f\u662f\u5c06\u53c2\u6570\u5e73\u94fa\uff0c\u53ea\u4e0d\u8fc7\u4ed6\u7684\u987a\u5e8f\u662f\u4ece\u5de6\u5f80\u53f3\u3002\u6211\u4eec\u6765\u5b9e\u73b0\u4e0b\uff0c\u53ea\u9700\u8981\u5c06 reduceRight \u6539\u6210 reduce \u5c31\u884c\u4e86")),t.a.createElement(r["a"],{code:"const pipe = function () {\n  const args = [].slice.apply(arguments);\n  return function (x) {\n    return args.reduce((res, cb) => cb(res), x);\n  };\n};\n\n// \u53c2\u6570\u987a\u5e8f\u6539\u4e3a\u4ece\u5de6\u5f80\u53f3\nlet calculate = pipe(add, multiply);\nlet res = calculate(10);\nconsole.log(res); // \u7ed3\u679c\u8fd8\u662f200",lang:"js"}),t.a.createElement("p",null,t.a.createElement("strong",null,"ES6 \u5199\u6cd5")),t.a.createElement(r["a"],{code:"const pipe =\n  (...args) =>\n  (x) =>\n    args.reduce((res, cb) => cb(res), x);",lang:"js"}))))},JjdP:function(n,e,a){"use strict";a.r(e),e["default"]={}},Zs1V:function(n){n.exports=JSON.parse("{}")}}]);