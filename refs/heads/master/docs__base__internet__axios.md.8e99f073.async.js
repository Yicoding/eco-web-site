(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[23],{JjdP:function(e,n,t){"use strict";t.r(n),n["default"]={}},Q3PB:function(e,n,t){"use strict";t.r(n);var a=t("q1tI"),r=t.n(a),l=t("dEAq"),o=t("H1Ra");t("JjdP");n["default"]=e=>(r.a.useEffect((()=>{var n;null!==e&&void 0!==e&&null!==(n=e.location)&&void 0!==n&&n.hash&&l["AnchorLink"].scrollToAnchor(decodeURIComponent(e.location.hash.slice(1)))}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"markdown"},r.a.createElement("h1",{id:"axios"},r.a.createElement(l["AnchorLink"],{to:"#axios","aria-hidden":"true",tabIndex:-1},r.a.createElement("span",{className:"icon icon-link"})),"axios"),r.a.createElement("p",null,r.a.createElement("img",{src:t("sJcP"),alt:"image"})),r.a.createElement("h2",{id:"1\u5b9a\u4e49"},r.a.createElement(l["AnchorLink"],{to:"#1\u5b9a\u4e49","aria-hidden":"true",tabIndex:-1},r.a.createElement("span",{className:"icon icon-link"})),"1.\u5b9a\u4e49"),r.a.createElement("ul",null,r.a.createElement("li",null,"axios \u662f\u4e00\u4e2a\u57fa\u4e8e promise \u7684 HTTP \u5e93\uff0c\u53ef\u4ee5\u7528\u5728\u6d4f\u89c8\u5668\u548c node.js \u4e2d")),r.a.createElement("h2",{id:"2\u7279\u6027"},r.a.createElement(l["AnchorLink"],{to:"#2\u7279\u6027","aria-hidden":"true",tabIndex:-1},r.a.createElement("span",{className:"icon icon-link"})),"2.\u7279\u6027"),r.a.createElement("ul",null,r.a.createElement("li",null,"\u4ece\u6d4f\u89c8\u5668\u4e2d\u521b\u5efa XMLHttpRequests"),r.a.createElement("li",null,"\u4ece node.js \u521b\u5efa http \u8bf7\u6c42"),r.a.createElement("li",null,"\u652f\u6301 Promise API"),r.a.createElement("li",null,"\u62e6\u622a\u8bf7\u6c42\u548c\u54cd\u5e94"),r.a.createElement("li",null,"\u8f6c\u6362\u8bf7\u6c42\u6570\u636e\u548c\u54cd\u5e94\u6570\u636e"),r.a.createElement("li",null,"\u53d6\u6d88\u8bf7\u6c42"),r.a.createElement("li",null,"\u81ea\u52a8\u8f6c\u6362 JSON \u6570\u636e"),r.a.createElement("li",null,"\u5ba2\u6237\u7aef\u652f\u6301\u9632\u5fa1 CSRF")),r.a.createElement("h2",{id:"3axios-\u53ef\u4ee5\u7528\u5728\u6d4f\u89c8\u5668\u548c-node-\u4e2d\u7684\u539f\u56e0"},r.a.createElement(l["AnchorLink"],{to:"#3axios-\u53ef\u4ee5\u7528\u5728\u6d4f\u89c8\u5668\u548c-node-\u4e2d\u7684\u539f\u56e0","aria-hidden":"true",tabIndex:-1},r.a.createElement("span",{className:"icon icon-link"})),"3.axios \u53ef\u4ee5\u7528\u5728\u6d4f\u89c8\u5668\u548c node \u4e2d\u7684\u539f\u56e0"),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("p",null,"\u8fd0\u7528\u4e86\u9002\u914d\u5668\u6a21\u5f0f\uff0c\u5b8c\u7f8e\u5730\u62b9\u5e73\u4e86\u6d4f\u89c8\u5668\u548c Node \u73af\u5883\u4e0b api \u7684\u8c03\u7528\u5dee\u5f02\uff08\u5224\u65ad\u73af\u5883\uff09"),r.a.createElement(o["a"],{code:"function getDefaultAdapter() {\n  var adapter;\n  // \u5224\u65ad\u5f53\u524d\u662f\u5426\u662fnode\u73af\u5883\n  if (\n    typeof process !== 'undefined' &&\n    Object.prototype.toString.call(process) === '[object process]'\n  ) {\n    // \u5982\u679c\u662fnode\u73af\u5883\uff0c\u8c03\u7528node\u4e13\u5c5e\u7684http\u9002\u914d\u5668\n    adapter = require('./adapters/http');\n  } else if (typeof XMLHttpRequest !== 'undefined') {\n    // \u5982\u679c\u662f\u6d4f\u89c8\u5668\u73af\u5883\uff0c\u8c03\u7528\u57fa\u4e8exhr\u7684\u9002\u914d\u5668\n    adapter = require('./adapters/xhr');\n  }\n  return adapter;\n}",lang:"js"})),r.a.createElement("li",null,r.a.createElement("p",null,"\u5982\u679c\u662f\u6d4f\u89c8\u5668\uff0c\u5c31\u4f1a\u57fa\u4e8e XMLHttpRequests \u5b9e\u73b0")),r.a.createElement("li",null,r.a.createElement("p",null,"\u5982\u679c\u662f node \u73af\u5883\uff0c\u5c31\u4f1a\u57fa\u4e8e node \u5185\u7f6e\u6838\u5fc3\u6a21\u5757 http \u5b9e\u73b0")),r.a.createElement("li",null,r.a.createElement("p",null,"\u51fa\u53c2\u90fd\u662f\u4e00\u4e2a Promise"))),r.a.createElement("h2",{id:"4get-\u8bf7\u6c42"},r.a.createElement(l["AnchorLink"],{to:"#4get-\u8bf7\u6c42","aria-hidden":"true",tabIndex:-1},r.a.createElement("span",{className:"icon icon-link"})),"4.get \u8bf7\u6c42"),r.a.createElement("h3",{id:"1\u53c2\u6570\u653e\u5728-url-\u4e2d"},r.a.createElement(l["AnchorLink"],{to:"#1\u53c2\u6570\u653e\u5728-url-\u4e2d","aria-hidden":"true",tabIndex:-1},r.a.createElement("span",{className:"icon icon-link"})),"1\uff09\u53c2\u6570\u653e\u5728 url \u4e2d"),r.a.createElement(o["a"],{code:"axios\n  .get('/user?id=123')\n  .then(() => {})\n  .catch(() => {});",lang:"js"}),r.a.createElement("h3",{id:"2\u53c2\u6570\u653e\u5728-params-\u4e2d"},r.a.createElement(l["AnchorLink"],{to:"#2\u53c2\u6570\u653e\u5728-params-\u4e2d","aria-hidden":"true",tabIndex:-1},r.a.createElement("span",{className:"icon icon-link"})),"2\uff09\u53c2\u6570\u653e\u5728 params \u4e2d"),r.a.createElement(o["a"],{code:"axios\n  .get('/user', {\n    params: {\n      id: '123',\n    },\n  })\n  .then(() => {})\n  .catch(() => {});",lang:"js"}),r.a.createElement("h2",{id:"5post-\u8bf7\u6c42"},r.a.createElement(l["AnchorLink"],{to:"#5post-\u8bf7\u6c42","aria-hidden":"true",tabIndex:-1},r.a.createElement("span",{className:"icon icon-link"})),"5.post \u8bf7\u6c42"),r.a.createElement(o["a"],{code:"axios\n  .post('/user', {\n    id: '123',\n  })\n  .then(() => {})\n  .catch(() => {});",lang:"js"}),r.a.createElement("h2",{id:"6\u5e76\u53d1\u8bf7\u6c42-all"},r.a.createElement(l["AnchorLink"],{to:"#6\u5e76\u53d1\u8bf7\u6c42-all","aria-hidden":"true",tabIndex:-1},r.a.createElement("span",{className:"icon icon-link"})),"6.\u5e76\u53d1\u8bf7\u6c42 all"),r.a.createElement(o["a"],{code:"function request1() {\n  return axios.get('/user?id=1');\n}\nfunction request2() {\n  return axios.get('/user?id=2');\n}\n\naxios.all([request1(), request2()]).then(axios.spread((res1, res2) => {}));",lang:"js"}),r.a.createElement("h2",{id:"7\u521b\u5efa\u5b9e\u4f8b"},r.a.createElement(l["AnchorLink"],{to:"#7\u521b\u5efa\u5b9e\u4f8b","aria-hidden":"true",tabIndex:-1},r.a.createElement("span",{className:"icon icon-link"})),"7.\u521b\u5efa\u5b9e\u4f8b"),r.a.createElement("ul",null,r.a.createElement("li",null,"\u53ef\u4ee5\u4f7f\u7528\u81ea\u5b9a\u4e49\u914d\u7f6e\u65b0\u5efa\u4e00\u4e2a axios \u5b9e\u4f8b")),r.a.createElement("blockquote",null,r.a.createElement("p",null,"axios.create([config])")),r.a.createElement(o["a"],{code:"const instance = axios.create({\n  baseURL: 'https://some-domain.com/api/',\n  timeout: 1000,\n  headers: { 'X-Custom-Header': 'foobar' },\n});",lang:"js"}),r.a.createElement("h2",{id:"8\u62e6\u622a\u5668"},r.a.createElement(l["AnchorLink"],{to:"#8\u62e6\u622a\u5668","aria-hidden":"true",tabIndex:-1},r.a.createElement("span",{className:"icon icon-link"})),"8.\u62e6\u622a\u5668"),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("p",null,"\u5728\u8bf7\u6c42\u6216\u54cd\u5e94\u88ab then \u6216 catch \u5904\u7406\u524d\u62e6\u622a\u5b83\u4eec interceptors")),r.a.createElement("li",null,r.a.createElement("p",null,"\u53d1\u9001\u4e00\u4e2a\u8bf7\u6c42\u7684\u65f6\u5019\u4f1a\u5148\u6267\u884c\u8bf7\u6c42\u62e6\u622a\u5668\u7684\u4ee3\u7801\uff0c\u7136\u540e\u518d\u771f\u6b63\u5730\u6267\u884c\u6211\u4eec\u53d1\u9001\u7684\u8bf7\u6c42\uff0c\u8fd9\u4e2a\u8fc7\u7a0b\u4f1a\u5bf9 config\uff0c\u4e5f\u5c31\u662f\u6211\u4eec\u53d1\u9001\u8bf7\u6c42\u65f6\u4f20\u9001\u7684\u53c2\u6570\u8fdb\u884c\u4e00\u4e9b\u64cd\u4f5c")),r.a.createElement("li",null,r.a.createElement("p",null,"\u800c\u5f53\u63a5\u6536\u54cd\u5e94\u7684\u65f6\u5019\uff0c\u4f1a\u5148\u6267\u884c\u54cd\u5e94\u62e6\u622a\u5668\u7684\u4ee3\u7801\uff0c\u7136\u540e\u518d\u628a\u54cd\u5e94\u7684\u6570\u636e\u8fd4\u56de\u6765\uff0c\u8fd9\u4e2a\u8fc7\u7a0b\u4f1a\u5bf9 response\uff0c\u4e5f\u5c31\u662f\u54cd\u5e94\u7684\u6570\u636e\u8fdb\u884c\u4e00\u7cfb\u5217\u64cd\u4f5c"))),r.a.createElement("h3",{id:"1\u6dfb\u52a0\u8bf7\u6c42\u62e6\u622a\u5668-request"},r.a.createElement(l["AnchorLink"],{to:"#1\u6dfb\u52a0\u8bf7\u6c42\u62e6\u622a\u5668-request","aria-hidden":"true",tabIndex:-1},r.a.createElement("span",{className:"icon icon-link"})),"1\uff09\u6dfb\u52a0\u8bf7\u6c42\u62e6\u622a\u5668 request"),r.a.createElement(o["a"],{code:"// \u6dfb\u52a0\u8bf7\u6c42\u62e6\u622a\u5668\naxios.interceptors.request.use(\n  function (config) {\n    // \u5728\u53d1\u9001\u8bf7\u6c42\u4e4b\u524d\u505a\u4e9b\u4ec0\u4e48\n    return config;\n  },\n  function (error) {\n    // \u5bf9\u8bf7\u6c42\u9519\u8bef\u505a\u4e9b\u4ec0\u4e48\n    return Promise.reject(error);\n  },\n);",lang:"js"}),r.a.createElement("h3",{id:"2\u6dfb\u52a0\u54cd\u5e94\u62e6\u622a\u5668-response"},r.a.createElement(l["AnchorLink"],{to:"#2\u6dfb\u52a0\u54cd\u5e94\u62e6\u622a\u5668-response","aria-hidden":"true",tabIndex:-1},r.a.createElement("span",{className:"icon icon-link"})),"2\uff09\u6dfb\u52a0\u54cd\u5e94\u62e6\u622a\u5668 response"),r.a.createElement(o["a"],{code:"// \u6dfb\u52a0\u54cd\u5e94\u62e6\u622a\u5668\naxios.interceptors.response.use(\n  function (response) {\n    // \u5bf9\u54cd\u5e94\u6570\u636e\u505a\u70b9\u4ec0\u4e48\n    return response;\n  },\n  function (error) {\n    // \u5bf9\u54cd\u5e94\u9519\u8bef\u505a\u70b9\u4ec0\u4e48\n    return Promise.reject(error);\n  },\n);",lang:"js"}),r.a.createElement("h3",{id:"3\u79fb\u9664\u62e6\u622a\u5668-eject"},r.a.createElement(l["AnchorLink"],{to:"#3\u79fb\u9664\u62e6\u622a\u5668-eject","aria-hidden":"true",tabIndex:-1},r.a.createElement("span",{className:"icon icon-link"})),"3\uff09\u79fb\u9664\u62e6\u622a\u5668 eject"),r.a.createElement(o["a"],{code:"const myInterceptor = axios.interceptors.request.use(function () {\n  /*...*/\n});\naxios.interceptors.request.eject(myInterceptor);",lang:"js"}),r.a.createElement("h3",{id:"4\u4e3a\u5b9e\u4f8b\u6dfb\u52a0\u62e6\u622a\u5668"},r.a.createElement(l["AnchorLink"],{to:"#4\u4e3a\u5b9e\u4f8b\u6dfb\u52a0\u62e6\u622a\u5668","aria-hidden":"true",tabIndex:-1},r.a.createElement("span",{className:"icon icon-link"})),"4\uff09\u4e3a\u5b9e\u4f8b\u6dfb\u52a0\u62e6\u622a\u5668"),r.a.createElement(o["a"],{code:"const instance = axios.create();\ninstance.interceptors.request.use(function () {\n  /*...*/\n});",lang:"js"}),r.a.createElement("h2",{id:"9\u53d6\u6d88\u8bf7\u6c42"},r.a.createElement(l["AnchorLink"],{to:"#9\u53d6\u6d88\u8bf7\u6c42","aria-hidden":"true",tabIndex:-1},r.a.createElement("span",{className:"icon icon-link"})),"9.\u53d6\u6d88\u8bf7\u6c42"),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("p",null,"\u4f7f\u7528 cancel token \u53d6\u6d88\u8bf7\u6c42")),r.a.createElement("li",null,r.a.createElement("p",null,"\u53ef\u4ee5\u4f7f\u7528\u540c\u4e00\u4e2a cancel token \u53d6\u6d88\u591a\u4e2a\u8bf7\u6c42"))),r.a.createElement("h3",{id:"1\u4f7f\u7528-canceltokensource-\u5de5\u5382\u65b9\u6cd5\u521b\u5efa-cancel-token"},r.a.createElement(l["AnchorLink"],{to:"#1\u4f7f\u7528-canceltokensource-\u5de5\u5382\u65b9\u6cd5\u521b\u5efa-cancel-token","aria-hidden":"true",tabIndex:-1},r.a.createElement("span",{className:"icon icon-link"})),"1\uff09\u4f7f\u7528 CancelToken.source \u5de5\u5382\u65b9\u6cd5\u521b\u5efa cancel token"),r.a.createElement(o["a"],{code:"const CancelToken = axios.CancelToken;\nconst source = CancelToken.source();\n\naxios\n  .get('/user/12345', {\n    cancelToken: source.token,\n  })\n  .catch(function (thrown) {\n    if (axios.isCancel(thrown)) {\n      console.log('Request canceled', thrown.message);\n    } else {\n      // \u5904\u7406\u9519\u8bef\n    }\n  });\n\naxios.post(\n  '/user/12345',\n  {\n    name: 'new name',\n  },\n  {\n    cancelToken: source.token,\n  },\n);\n\n// \u53d6\u6d88\u8bf7\u6c42\uff08message \u53c2\u6570\u662f\u53ef\u9009\u7684\uff09\nsource.cancel('Operation canceled by the user.');",lang:"js"}),r.a.createElement("h3",{id:"2\u901a\u8fc7\u4f20\u9012\u4e00\u4e2a-executor-\u51fd\u6570\u5230-canceltoken-\u7684\u6784\u9020\u51fd\u6570\u6765\u521b\u5efa-cancel-token"},r.a.createElement(l["AnchorLink"],{to:"#2\u901a\u8fc7\u4f20\u9012\u4e00\u4e2a-executor-\u51fd\u6570\u5230-canceltoken-\u7684\u6784\u9020\u51fd\u6570\u6765\u521b\u5efa-cancel-token","aria-hidden":"true",tabIndex:-1},r.a.createElement("span",{className:"icon icon-link"})),"2\uff09\u901a\u8fc7\u4f20\u9012\u4e00\u4e2a executor \u51fd\u6570\u5230 CancelToken \u7684\u6784\u9020\u51fd\u6570\u6765\u521b\u5efa cancel token"),r.a.createElement(o["a"],{code:"const CancelToken = axios.CancelToken;\nlet cancel;\n\naxios.get('/user/12345', {\n  cancelToken: new CancelToken(function executor(c) {\n    // executor \u51fd\u6570\u63a5\u6536\u4e00\u4e2a cancel \u51fd\u6570\u4f5c\u4e3a\u53c2\u6570\n    cancel = c;\n  }),\n});\n\n// cancel the request\ncancel();",lang:"js"}),r.a.createElement("h2",{id:"10\u5141\u8bb8\u643a\u5e26-cookie"},r.a.createElement(l["AnchorLink"],{to:"#10\u5141\u8bb8\u643a\u5e26-cookie","aria-hidden":"true",tabIndex:-1},r.a.createElement("span",{className:"icon icon-link"})),"10.\u5141\u8bb8\u643a\u5e26 cookie"),r.a.createElement(o["a"],{code:"const defaultOptions = {\n  withCredentials: true,\n};",lang:"js"}),r.a.createElement("h2",{id:"11\u8bf7\u6c42\u8d85\u65f6\u65f6\u95f4"},r.a.createElement(l["AnchorLink"],{to:"#11\u8bf7\u6c42\u8d85\u65f6\u65f6\u95f4","aria-hidden":"true",tabIndex:-1},r.a.createElement("span",{className:"icon icon-link"})),"11.\u8bf7\u6c42\u8d85\u65f6\u65f6\u95f4"),r.a.createElement(o["a"],{code:"const defaultOptions = {\n  timeout: 15000,\n};",lang:"js"}),r.a.createElement("h2",{id:"12\u8bf7\u6c42\u5934"},r.a.createElement(l["AnchorLink"],{to:"#12\u8bf7\u6c42\u5934","aria-hidden":"true",tabIndex:-1},r.a.createElement("span",{className:"icon icon-link"})),"12.\u8bf7\u6c42\u5934"),r.a.createElement(o["a"],{code:"const defaultOptions = {\n  headers: {\n    Accept: 'application/json',\n    'Content-Type': 'application/json; charset=utf-8',\n  },\n};",lang:"js"}),r.a.createElement("h3",{id:"1applicationjson"},r.a.createElement(l["AnchorLink"],{to:"#1applicationjson","aria-hidden":"true",tabIndex:-1},r.a.createElement("span",{className:"icon icon-link"})),"1\uff09application/json"),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("p",null,"\u53c2\u6570\u4f1a\u76f4\u63a5\u653e\u5728\u8bf7\u6c42\u4f53\u4e2d\uff0c\u4ee5 JSON \u683c\u5f0f\u7684\u53d1\u9001\u5230\u540e\u7aef")),r.a.createElement("li",null,r.a.createElement("p",null,"\u8fd9\u4e5f\u662f axios \u8bf7\u6c42\u7684\u9ed8\u8ba4\u65b9\u5f0f")),r.a.createElement("li",null,r.a.createElement("p",null,"\u8fd9\u79cd\u7c7b\u578b\u4f7f\u7528\u6700\u4e3a\u5e7f\u6cdb"))),r.a.createElement("h3",{id:"2applicationx-www-form-urlencoded"},r.a.createElement(l["AnchorLink"],{to:"#2applicationx-www-form-urlencoded","aria-hidden":"true",tabIndex:-1},r.a.createElement("span",{className:"icon icon-link"})),"2\uff09application/x-www-form-urlencoded"),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("p",null,"\u8bf7\u6c42\u4f53\u4e2d\u7684\u6570\u636e\u4f1a\u4ee5\u666e\u901a\u8868\u5355\u5f62\u5f0f\uff08\u952e\u503c\u5bf9\uff09\u53d1\u9001\u5230\u540e\u7aef")),r.a.createElement("li",null,r.a.createElement("p",null,"1.\u4f7f\u7528 URLSearchParams API"))),r.a.createElement(o["a"],{code:"const params = new URLSearchParams();\nparams.append('param1', 'value1');\nparams.append('param2', 'value2');\naxios.post('/foo', params);",lang:"js"}),r.a.createElement("ul",null,r.a.createElement("li",null,"2.\u4f7f\u7528 qs \u5e93")),r.a.createElement(o["a"],{code:"import qs from 'qs';\n\naxios.post('/foo', qs.stringify({ bar: '123' }));",lang:"js"}),r.a.createElement("h3",{id:"3multipartform-data"},r.a.createElement(l["AnchorLink"],{to:"#3multipartform-data","aria-hidden":"true",tabIndex:-1},r.a.createElement("span",{className:"icon icon-link"})),"3\uff09multipart/form-data"),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("p",null,"\u53c2\u6570\u4f1a\u5728\u8bf7\u6c42\u4f53\u4e2d\uff0c\u4ee5\u6807\u7b7e\u4e3a\u5355\u5143\uff0c\u7528\u5206\u9694\u7b26(\u53ef\u4ee5\u81ea\u5b9a\u4e49\u7684 boundary)\u5206\u5f00")),r.a.createElement("li",null,r.a.createElement("p",null,"\u65e2\u53ef\u4ee5\u4e0a\u4f20\u952e\u503c\u5bf9\uff0c\u4e5f\u53ef\u4ee5\u4e0a\u4f20\u6587\u4ef6")),r.a.createElement("li",null,r.a.createElement("p",null,"\u901a\u5e38\u88ab\u7528\u6765\u4e0a\u4f20\u6587\u4ef6\u7684\u683c\u5f0f"))),r.a.createElement("h2",{id:"13\u624b\u5199-axios"},r.a.createElement(l["AnchorLink"],{to:"#13\u624b\u5199-axios","aria-hidden":"true",tabIndex:-1},r.a.createElement("span",{className:"icon icon-link"})),"13.\u624b\u5199 axios"),r.a.createElement("h3",{id:"1\u5206\u6790"},r.a.createElement(l["AnchorLink"],{to:"#1\u5206\u6790","aria-hidden":"true",tabIndex:-1},r.a.createElement("span",{className:"icon icon-link"})),"1\uff09\u5206\u6790"),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("p",null,"1.\u4ece axios(config)\u7684\u4f7f\u7528\u4e0a\uff0c\u53ef\u4ee5\u770b\u51fa\u5bfc\u51fa\u7684 axios \u662f\u4e00\u4e2a\u65b9\u6cd5")),r.a.createElement("li",null,r.a.createElement("p",null,"2.\u4ece axios.method(url, data, config)\u7684\u4f7f\u7528\u4e0a\u53ef\u4ee5\u770b\u51fa\u5bfc\u51fa\u7684 axios \u4e0a\u6216\u8005\u539f\u578b prototype \u4e0a\u6302\u8f7d\u4e86 get\u3001post \u7b49\u65b9\u6cd5")),r.a.createElement("li",null,r.a.createElement("p",null,"3.\u5b9e\u9645\u4e0a\u5bfc\u51fa\u7684 axios \u662f\u4e00\u4e2a Axios \u7c7b\u4e2d\u7684\u4e00\u4e2a request \u65b9\u6cd5"))),r.a.createElement("h3",{id:"2\u5b9e\u73b0-axios-\u7c7b\u548c-request-\u65b9\u6cd5"},r.a.createElement(l["AnchorLink"],{to:"#2\u5b9e\u73b0-axios-\u7c7b\u548c-request-\u65b9\u6cd5","aria-hidden":"true",tabIndex:-1},r.a.createElement("span",{className:"icon icon-link"})),"2\uff09\u5b9e\u73b0 Axios \u7c7b\u548c request \u65b9\u6cd5"),r.a.createElement(o["a"],{code:"class Axios {\n  constructor() {}\n\n  request(config) {\n    return new Promise((resolve) => {\n      const { url = '', method = 'get', data = {} } = config;\n      // \u53d1\u9001ajax\u8bf7\u6c42\n      const xhr = new XMLHttpRequest();\n      xhr.open(method, url, true);\n      xhr.onload = function () {\n        resolve(xhr.responseText);\n      };\n      xhr.send(data);\n    });\n  }\n}\n\n// \u6700\u7ec8\u5bfc\u51faaxios\u7684\u65b9\u6cd5\uff0c\u5373\u5b9e\u4f8b\u7684request\u65b9\u6cd5\nfunction CreateAxiosFn() {\n  const axios = new Axios();\n  const req = axios.request.bind(axios);\n  return req;\n}\n\n// \u5f97\u5230\u6700\u540e\u7684\u5168\u5c40\u53d8\u91cfaxios\nconst axios = CreateAxiosFn();",lang:"js"}),r.a.createElement("h3",{id:"3\u5b9e\u73b0-axiosmethod"},r.a.createElement(l["AnchorLink"],{to:"#3\u5b9e\u73b0-axiosmethod","aria-hidden":"true",tabIndex:-1},r.a.createElement("span",{className:"icon icon-link"})),"3\uff09\u5b9e\u73b0 axios.method()"),r.a.createElement(o["a"],{code:"const methodsArr = ['get', 'post', 'put', 'delete', 'head', 'options', 'patch'];\nmethodsArr.forEach((method) => {\n  Axios.prototype[method] = function () {\n    // \u5904\u7406\u5355\u4e2a\u65b9\u6cd5\n    if (['get', 'delete', 'head', 'options'].includes(method)) {\n      // \u63a5\u65362\u4e2a\u53c2\u6570(url[, config])\u7684\u65b9\u6cd5\n      return this.request({\n        method,\n        url: arguments[0],\n        ...(arguments[1] || {}),\n      });\n    } else {\n      // \u63a5\u65363\u4e2a\u53c2\u6570(url[,data[,config]])\u7684\u65b9\u6cd5\n      return this.request({\n        method,\n        url: arguments[0],\n        data: arguments[1] || {},\n        ...(arguments[2] || {}),\n      });\n    }\n  };\n});",lang:"js"}),r.a.createElement("h3",{id:"4\u628a-axiosprototype-\u4e0a\u7684\u65b9\u6cd5\u642c\u8fd0\u5230-request-\u4e0a"},r.a.createElement(l["AnchorLink"],{to:"#4\u628a-axiosprototype-\u4e0a\u7684\u65b9\u6cd5\u642c\u8fd0\u5230-request-\u4e0a","aria-hidden":"true",tabIndex:-1},r.a.createElement("span",{className:"icon icon-link"})),"4\uff09\u628a Axios.prototype \u4e0a\u7684\u65b9\u6cd5\u642c\u8fd0\u5230 request \u4e0a"),r.a.createElement("ul",null,r.a.createElement("li",null,"\u5b9e\u73b0\u4e00\u4e2a\u5de5\u5177\u65b9\u6cd5\uff0c\u5b9e\u73b0\u5c06 b \u7684\u65b9\u6cd5\u6df7\u5165 a")),r.a.createElement(o["a"],{code:"const utils = {\n  extend(a, b, context) {\n    for (let key in b) {\n      if (b.hasOwnProperty(key)) {\n        if (typeof b[key] === 'function') {\n          a[key] = b[key].bind(context);\n        } else {\n          a[key] = b[key];\n        }\n      }\n    }\n  },\n};\n\n// \u4fee\u6539\u4e00\u4e0b\u4e4b\u524d\u7684CreateAxiosFn\u65b9\u6cd5\u5373\u53ef\nfunction CreateAxiosFn() {\n  const axios = new Axios();\n\n  const req = axios.request.bind(axios);\n  // \u589e\u52a0\u4ee3\u7801\n  utils.extend(req, Axios.prototype, axios);\n\n  return req;\n}",lang:"js"}),r.a.createElement("h3",{id:"5\u8bf7\u6c42\u548c\u54cd\u5e94\u62e6\u622a\u5668"},r.a.createElement(l["AnchorLink"],{to:"#5\u8bf7\u6c42\u548c\u54cd\u5e94\u62e6\u622a\u5668","aria-hidden":"true",tabIndex:-1},r.a.createElement("span",{className:"icon icon-link"})),"5\uff09\u8bf7\u6c42\u548c\u54cd\u5e94\u62e6\u622a\u5668"),r.a.createElement(o["a"],{code:"// \u5c01\u88c5\u62e6\u622a\u5668\u7684\u7c7b\nclass InterceptorsManage {\n  constructor() {\n    this.handlers = [];\n  }\n\n  use(fullfield, rejected) {\n    this.handlers.push({\n      fullfield,\n      rejected,\n    });\n  }\n}\n\n// \u7ed9Axios\u6dfb\u52a0\u62e6\u622a\u5668\nclass Axios {\n  constructor() {\n    this.interceptors = {\n      request: new InterceptorsManage(),\n      response: new InterceptorsManage(),\n    };\n  }\n}\n\n// \u4fee\u6539CreateAxiosFn\uff0c\u5c06interceptors\u5bf9\u8c61\u6302\u8f7d\u5230request\u4e0a\nfunction CreateAxiosFn() {\n  let axios = new Axios();\n\n  let req = axios.request.bind(axios);\n  // \u6df7\u5165\u65b9\u6cd5\uff0c \u5904\u7406axios\u7684request\u65b9\u6cd5\uff0c\u4f7f\u4e4b\u62e5\u6709get,post...\u65b9\u6cd5\n  utils.extend(req, Axios.prototype, axios);\n  // \u65b0\u589e\u4ee3\u7801\n  utils.extend(req, axios);\n  return req;\n}\n\n// \u53d1\u9001\u8bf7\u6c42\u7684\u65f6\u5019\uff0c\u4f1a\u5148\u83b7\u53d6request\u62e6\u622a\u5668\u7684handlers\u7684\u65b9\u6cd5\u6765\u6267\u884c\u3002\u518d\u6267\u884c\u6211\u4eec\u53d1\u9001\u7684\u8bf7\u6c42\uff0c\u7136\u540e\u83b7\u53d6response\u62e6\u622a\u5668\u7684handlers\u7684\u65b9\u6cd5\u6765\u6267\u884c\nclass Axios {\n  request(config) {\n    // \u62e6\u622a\u5668\u548c\u8bf7\u6c42\u7ec4\u88c5\u961f\u5217\n    let chain = [this.sendAjax.bind(this), undefined]; // \u6210\u5bf9\u51fa\u73b0\u7684\uff0c\u5931\u8d25\u56de\u8c03\u6682\u65f6\u4e0d\u5904\u7406\n\n    // \u8bf7\u6c42\u62e6\u622a\n    this.interceptors.request.handlers.forEach((interceptor) => {\n      chain.unshift(interceptor.fullfield, interceptor.rejected);\n    });\n\n    // \u54cd\u5e94\u62e6\u622a\n    this.interceptors.response.handlers.forEach((interceptor) => {\n      chain.push(interceptor.fullfield, interceptor.rejected);\n    });\n\n    // \u6267\u884c\u961f\u5217\uff0c\u6bcf\u6b21\u6267\u884c\u4e00\u5bf9\uff0c\u5e76\u7ed9promise\u8d4b\u6700\u65b0\u7684\u503c\n    let promise = Promise.resolve(config);\n    while (chain.length > 0) {\n      promise = promise.then(chain.shift(), chain.shift());\n    }\n    return promise;\n  }\n  sendAjax(config) {\n    return new Promise((resolve) => {\n      const { url = '', method = 'get', data = {} } = config;\n      // \u53d1\u9001ajax\u8bf7\u6c42\n      console.log(config);\n      const xhr = new XMLHttpRequest();\n      xhr.open(method, url, true);\n      xhr.onload = function () {\n        console.log(xhr.responseText);\n        resolve(xhr.responseText);\n      };\n      xhr.send(data);\n    });\n  }\n}",lang:"js"}),r.a.createElement("h3",{id:"6\u5b8c\u6574\u4ee3\u7801"},r.a.createElement(l["AnchorLink"],{to:"#6\u5b8c\u6574\u4ee3\u7801","aria-hidden":"true",tabIndex:-1},r.a.createElement("span",{className:"icon icon-link"})),"6\uff09\u5b8c\u6574\u4ee3\u7801"),r.a.createElement(o["a"],{code:"class InterceptorsManage {\n  constructor() {\n    this.handlers = [];\n  }\n\n  use(fullfield, rejected) {\n    this.handlers.push({\n      fullfield,\n      rejected,\n    });\n  }\n}\n\nclass Axios {\n  constructor() {\n    this.interceptors = {\n      request: new InterceptorsManage(),\n      response: new InterceptorsManage(),\n    };\n  }\n\n  request(config) {\n    // \u62e6\u622a\u5668\u548c\u8bf7\u6c42\u7ec4\u88c5\u961f\u5217\n    let chain = [this.sendAjax.bind(this), undefined]; // \u6210\u5bf9\u51fa\u73b0\u7684\uff0c\u5931\u8d25\u56de\u8c03\u6682\u65f6\u4e0d\u5904\u7406\n\n    // \u8bf7\u6c42\u62e6\u622a\n    this.interceptors.request.handlers.forEach((interceptor) => {\n      chain.unshift(interceptor.fullfield, interceptor.rejected);\n    });\n\n    // \u54cd\u5e94\u62e6\u622a\n    this.interceptors.response.handlers.forEach((interceptor) => {\n      chain.push(interceptor.fullfield, interceptor.rejected);\n    });\n\n    // \u6267\u884c\u961f\u5217\uff0c\u6bcf\u6b21\u6267\u884c\u4e00\u5bf9\uff0c\u5e76\u7ed9promise\u8d4b\u6700\u65b0\u7684\u503c\n    let promise = Promise.resolve(config);\n    while (chain.length > 0) {\n      promise = promise.then(chain.shift(), chain.shift());\n    }\n    return promise;\n  }\n  sendAjax() {\n    return new Promise((resolve) => {\n      const { url = '', method = 'get', data = {} } = config;\n      // \u53d1\u9001ajax\u8bf7\u6c42\n      console.log(config);\n      const xhr = new XMLHttpRequest();\n      xhr.open(method, url, true);\n      xhr.onload = function () {\n        console.log(xhr.responseText);\n        resolve(xhr.responseText);\n      };\n      xhr.send(data);\n    });\n  }\n}\n\n// \u5b9a\u4e49get,post...\u65b9\u6cd5\uff0c\u6302\u5728\u5230Axios\u539f\u578b\u4e0a\nconst methodsArr = ['get', 'delete', 'head', 'options', 'put', 'patch', 'post'];\nmethodsArr.forEach((met) => {\n  Axios.prototype[met] = function () {\n    console.log('\u6267\u884c' + met + '\u65b9\u6cd5');\n    // \u5904\u7406\u5355\u4e2a\u65b9\u6cd5\n    if (['get', 'delete', 'head', 'options'].includes(met)) {\n      // 2\u4e2a\u53c2\u6570(url[, config])\n      return this.request({\n        method: met,\n        url: arguments[0],\n        ...(arguments[1] || {}),\n      });\n    } else {\n      // 3\u4e2a\u53c2\u6570(url[,data[,config]])\n      return this.request({\n        method: met,\n        url: arguments[0],\n        data: arguments[1] || {},\n        ...(arguments[2] || {}),\n      });\n    }\n  };\n});\n\n// \u5de5\u5177\u65b9\u6cd5\uff0c\u5b9e\u73b0b\u7684\u65b9\u6cd5\u6df7\u5165a;\n// \u65b9\u6cd5\u4e5f\u8981\u6df7\u5165\u8fdb\u53bb\nconst utils = {\n  extend(a, b, context) {\n    for (let key in b) {\n      if (b.hasOwnProperty(key)) {\n        if (typeof b[key] === 'function') {\n          a[key] = b[key].bind(context);\n        } else {\n          a[key] = b[key];\n        }\n      }\n    }\n  },\n};\n\n// \u6700\u7ec8\u5bfc\u51faaxios\u7684\u65b9\u6cd5-\u300b\u5373\u5b9e\u4f8b\u7684request\u65b9\u6cd5\nfunction CreateAxiosFn() {\n  let axios = new Axios();\n\n  let req = axios.request.bind(axios);\n  // \u6df7\u5165\u65b9\u6cd5\uff0c \u5904\u7406axios\u7684request\u65b9\u6cd5\uff0c\u4f7f\u4e4b\u62e5\u6709get,post...\u65b9\u6cd5\n  utils.extend(req, Axios.prototype, axios);\n  return req;\n}\n\n// \u5f97\u5230\u6700\u540e\u7684\u5168\u5c40\u53d8\u91cfaxios\nlet axios = CreateAxiosFn();",lang:"js"}))))},Zs1V:function(e){e.exports=JSON.parse("{}")},sJcP:function(e,n,t){e.exports=t.p+"static/1.5f95a88c.png"}}]);