(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{JjdP:function(e,n,l){"use strict";l.r(n),n["default"]={}},JxvU:function(e,n,l){"use strict";l.r(n);var a=l("q1tI"),t=l.n(a),c=l("dEAq"),i=l("H1Ra");l("JjdP");n["default"]=e=>(t.a.useEffect((()=>{var n;null!==e&&void 0!==e&&null!==(n=e.location)&&void 0!==n&&n.hash&&c["AnchorLink"].scrollToAnchor(decodeURIComponent(e.location.hash.slice(1)))}),[]),t.a.createElement(t.a.Fragment,null,t.a.createElement("div",{className:"markdown"},t.a.createElement("h1",{id:"pwa"},t.a.createElement(c["AnchorLink"],{to:"#pwa","aria-hidden":"true",tabIndex:-1},t.a.createElement("span",{className:"icon icon-link"})),"PWA"),t.a.createElement("ul",null,t.a.createElement("li",null,"PWA\uff08Progressive Web App\uff09\u6e10\u8fdb\u5f0f web app\uff0c\u4f7f\u7528\u591a\u79cd\u6280\u672f\u6765\u589e\u5f3a web app \u7684\u529f\u80fd\uff0c\u53ef\u4ee5\u8ba9\u7f51\u7ad9\u7684\u4f53\u9a8c\u53d8\u5f97\u66f4\u597d\uff0c\u80fd\u591f\u6a21\u62df\u4e00\u4e9b\u539f\u751f\u529f\u80fd\uff0c\u6bd4\u5982\u901a\u77e5\u63a8\u9001\u3002\u5728\u79fb\u52a8\u7aef\u5229\u7528\u6807\u51c6\u5316\u6846\u67b6\uff0c\u8ba9\u7f51\u9875\u5e94\u7528\u5448\u73b0\u548c\u539f\u751f\u5e94\u7528\u76f8\u4f3c\u7684\u4f53\u9a8c\u3002")),t.a.createElement("h2",{id:"1\u89e3\u51b3-web-\u7684\u4e09\u5927\u95ee\u9898"},t.a.createElement(c["AnchorLink"],{to:"#1\u89e3\u51b3-web-\u7684\u4e09\u5927\u95ee\u9898","aria-hidden":"true",tabIndex:-1},t.a.createElement("span",{className:"icon icon-link"})),"1.\u89e3\u51b3 web \u7684\u4e09\u5927\u95ee\u9898"),t.a.createElement("ul",null,t.a.createElement("li",null,"\u6ca1\u6709\u4e00\u7ea7\u5165\u53e3\uff1a\u53ea\u80fd\u901a\u8fc7\u6d4f\u89c8\u5668\u8f93\u5165 url \u8bbf\u95ee"),t.a.createElement("li",null,"\u4e0d\u80fd\u79bb\u7ebf\u8bbf\u95ee\uff1a\u65e0\u79bb\u7ebf\u7f13\u51b2\u673a\u5236"),t.a.createElement("li",null,"\u6ca1\u6709\u6d88\u606f\u63a8\u9001\u529f\u80fd")),t.a.createElement("h2",{id:"2manifestjson"},t.a.createElement(c["AnchorLink"],{to:"#2manifestjson","aria-hidden":"true",tabIndex:-1},t.a.createElement("span",{className:"icon icon-link"})),"2.manifest.json"),t.a.createElement("ul",null,t.a.createElement("li",null,"\u4e00\u7ea7\u5165\u53e3\u95ee\u9898\uff1a\u901a\u8fc7\u5f15\u5165 manifest.json \u89e3\u51b3\uff0c\u4e3b\u9875\u901a\u8fc7 link \u6807\u7b7e\u5f15\u5165\u5373\u53ef")),t.a.createElement(i["a"],{code:'// pwa-manifest.html\n<link rel="manifest" href="/manifest.json">\n\n// manifest.json\n{\n  //web app\u540d\u79f0\n "name": "PWA Demo",\n "short_name": "PWA",\n  //\u663e\u793a\u6a21\u5f0f\uff1afullscreen\u5168\u5c4f\u6a21\u5f0f\u3001standalone\u72ec\u2f74\u5e94\u2f64\u6a21\u5f0f\n  //minimal-ui\u6bd4standalone\u591a\u51fa\u5730\u5740\u680f\u3001browser\u6d4f\u89c8\u5668\u6a21\u5f0f\n "display": "standalone",\n  //\u5e94\u7528\u63cf\u8ff0\n "description": "pwa demo description",\n  //\u6307\u5b9a\u4e86\u2f64\u6237\u6253\u5f00\u8be5Web App\u65f6\u52a0\u8f7d\u7684URL\n "start_url": "/pwa-manifest.html",\n  //\u6307\u5b9a\u684c\u9762\u56fe\u6807\n "icons": [{\n     //\u56fe\u6807\u8def\u5f84\uff0c\u76f8\u5bf9\u4e8emanifest.json\n     "src": "/icon/logo-144.png",\n     "sizes": "144x144",  //\u56fe\u6807\u5927\u5c0f\n     "type": "image/png"  //\u56fe\u6807\u7c7b\u578b\n  }],\n //\u5f00\u5c4f\u754c\u9762\u9ed8\u8ba4\u80cc\u666f\n "background_color": "#aaa",\n //\u5e94\u7528\u7a0b\u5e8f\u9ed8\u8ba4\u80cc\u666f\u8272\n "theme_color": "#aaa"\n}',lang:"json"}),t.a.createElement("h2",{id:"3service-worker"},t.a.createElement(c["AnchorLink"],{to:"#3service-worker","aria-hidden":"true",tabIndex:-1},t.a.createElement("span",{className:"icon icon-link"})),"3.service worker"),t.a.createElement("ul",null,t.a.createElement("li",null,t.a.createElement("p",null,"\u89e3\u51b3\u79bb\u7ebf\u8bbf\u95ee\u95ee\u9898\uff0c\u672c\u8d28\u4e3a\u6d4f\u89c8\u5668\u548c\u540e\u7aef\u670d\u52a1\u7684\u4ee3\u7406\u4e2d\u95f4\u4ef6\uff0c\u517c\u5bb9\u6027\u4e0d\u4f73\uff0c\u767e\u5ea6\u4f7f\u7528 local storage \u6a21\u62df\u529f\u80fd")),t.a.createElement("li",null,t.a.createElement("p",null,"\u7279\u70b9\uff1a"),t.a.createElement("ul",null,t.a.createElement("li",null,"\u4e0d\u80fd\u8bbf\u95ee\uff0f\u64cd\u4f5c dom"),t.a.createElement("li",null,"\u4f1a\u2f83\u52a8\u4f11\u7720\uff0c\u4e0d\u4f1a\u968f\u6d4f\u89c8\u5668\u5173\u95ed\u6240\u5931\u6548(\u5fc5\u987b\u2f3f\u52a8\u5378\u8f7d)"),t.a.createElement("li",null,"\u79bb\u7ebf\u7f13\u5b58\u5185\u5bb9\u5f00\u53d1\u8005\u53ef\u63a7"),t.a.createElement("li",null,"\u5fc5\u987b\u5728 https \u6216\u8005 localhost \u4e0b\u4f7f\u2f64"),t.a.createElement("li",null,"\u6240\u6709\u7684 api \u90fd\u57fa\u4e8e promise"))),t.a.createElement("li",null,t.a.createElement("p",null,"\u539f\u7406\uff1a\u6d4f\u89c8\u5668\u548c\u540e\u7aef\u670d\u52a1\u4e4b\u95f4\u7684\u4e2d\u95f4\u4ef6")),t.a.createElement("li",null,t.a.createElement("p",null,"\u751f\u547d\u5468\u671f"),t.a.createElement("ul",null,t.a.createElement("li",null,"installing\uff1asw \u6ce8\u518c\u4e4b\u540e\uff0c\u8868\u793a\u5f00\u59cb\u5b89\u88c5\uff0c\u4f1a\u89e6\u53d1 install \u4e8b\u4ef6"),t.a.createElement("li",null,"installed"),t.a.createElement("li",null,"activating\uff1a\u89e6\u53d1 activate \u4e8b\u4ef6"),t.a.createElement("li",null,"activated"),t.a.createElement("li",null,"redundant\uff1a\u5197\u4f59\u5378\u8f7d\u65f6\u89e6\u53d1"))),t.a.createElement("li",null,t.a.createElement("p",null,"\u4e8b\u4ef6"),t.a.createElement("ul",null,t.a.createElement("li",null,"install",t.a.createElement("ul",null,t.a.createElement("li",null,"installing \u751f\u547d\u5468\u671f\u51fd\u6570\u4e2d\u89e6\u53d1"),t.a.createElement("li",null,"event.waitUntil(promise)\uff0c\u7b49\u5f85 promise resolved \u540e\u8fdb\u5165\u4e0b\u4e00\u4e2a\u751f\u547d\u5468\u671f installed"),t.a.createElement("li",null,"self.skipWaiting \u53ef\u8df3\u8fc7 installed \u751f\u547d\u5468\u671f\uff0c\u76f4\u63a5\u8fdb\u5165 activating \u751f\u547d\u5468\u671f"))),t.a.createElement("li",null,"activate",t.a.createElement("ul",null,t.a.createElement("li",null,"activating \u751f\u547d\u5468\u671f\u5185\u88ab\u89e6\u53d1"),t.a.createElement("li",null,"event.waitUntil(promise)\uff0c\u7b49\u5f85 promise resolved \u540e\u8fdb\u5165\u4e0b\u4e00\u4e2a\u751f\u547d\u5468\u671f activated"),t.a.createElement("li",null,"self.clients.claim()\uff0c\u6267\u884c\u8be5\u65b9\u6cd5\u8868\u793a\u53d6\u5f97\u9875\u9762\u63a7\u5236\u6743\uff0c\u8fd9\u6837\u6253\u5f00\u9875\u9762\u5c31\u4f1a\u4f7f\u7528\u65b0\u7248\u672c\u7684\u7f13\u5b58"))),t.a.createElement("li",null,"fetch\uff1a\u76d1\u542c\u6570\u636e\u83b7\u53d6 fetch \u65b9\u6cd5"),t.a.createElement("li",null,"push\uff1a\u76d1\u542c\u63a8\u9001\u6d88\u606f")))),t.a.createElement(i["a"],{code:"// ***** pwa-demo.html *****\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>pwa manifest</title>\n  \x3c!-- \u5f15\u5165manifest.json\u6587\u4ef6 --\x3e\n  <link rel=\"manifest\" href=\"/manifest.json\">\n</head>\n<body>\n  <div>pwa manifest 1.01</div>\n  <script src=\"./sw-cache.js\"><\/script>\n</body>\n</html>\n\n//***** sw-cache.js *****\n//serviceworker\u6302\u8f7d\u5728navigator\u4e0b\nif('serviceWorker' in navigator) {\n  navigator.serviceWorker.register('./sw.js').then(() => {\n    console.log('service worker \u6ce8\u518c\u6210\u529f')\n  })\n\t//\u7f13\u5b58\u6709\u66f4\u65b0\uff0c\u91cd\u65b0\u52a0\u8f7d\u9875\u9762\n  let refreshing = false\n  navigator.serviceWorker.addEventListener('controllerchange', () => {\n    if (refreshing) {\n      return\n    }\n    refreshing = true;\n    window.location.reload();\n  });\n}\n\n//***** sw.js *****\n//pwa\u5168\u5c40\u5bf9\u8c61\u4e13\u5c5e\u5bf9\u8c61 self\u3001caches\nvar cacheName = '1.01'; // \u7f13\u5b58\u7684key\nvar cacheFiles = [\n    './pwa-manifest.html',\n    './sw-cache.js',\n    './manifest.json',\n    './icon/logo-144-144.png',\n];\n\n// \u76d1\u542cinstall\u4e8b\u4ef6\nself.addEventListener('install', function (e) {\n  console.log('Service Worker \u72b6\u6001\uff1a install');\n  self.skipWaiting()\n  const cacheOpenPromise = caches.open(cacheName).then(function (cache) {\n    console.log(cache)\n    return cache.addAll(cacheFiles);\n  });\n  e.waitUntil(cacheOpenPromise); // \u7b49\u5f85promise resolved\u540e\uff0c\u4f1a\u8fdb\u5165\u4e0b\u4e00\u4e2a\u751f\u547d\u5468\u671f installed\n});\n\n// \u76d1\u542cfetch\u4e8b\u4ef6\uff0c\u8fd4\u56defetch\u6570\u636e\u7f13\u5b58\nself.addEventListener('fetch', function (e) {\n  // \u5982\u679c\u6709cache\u5219\u76f4\u63a5\u8fd4\u56de\uff0c\u5426\u5219\u901a\u8fc7fetch\u8bf7\u6c42\n  console.log(e.request)\n  e.respondWith(\n      caches.match(e.request).then(function (cache) {\n          return cache || fetch(e.request);\n      }).catch(function (err) {\n          console.log(err);\n          return fetch(e.request);\n      })\n  );\n});\n\n// \u76d1\u542cactivate\u4e8b\u4ef6\uff0c\u6fc0\u6d3b\u540e\u901a\u8fc7cache\u7684key\u6765\u5224\u65ad\u662f\u5426\u66f4\u65b0cache\u4e2d\u7684\u9759\u6001\u8d44\u6e90\nself.addEventListener('activate', function (e) {\n  console.log('Service Worker \u72b6\u6001\uff1a activate');\n  const cachePromise = caches.keys().then(function (keys) {\n      return Promise.all(keys.map(function (key) {\n          if (key !== cacheName) {\n              return caches.delete(key);\n          }\n      }));\n  })\n  e.waitUntil(cachePromise);\n  return self.clients.claim();// \u6fc0\u6d3b\u5f53\u524dclient\n});",lang:"js"}),t.a.createElement("h2",{id:"4push"},t.a.createElement(c["AnchorLink"],{to:"#4push","aria-hidden":"true",tabIndex:-1},t.a.createElement("span",{className:"icon icon-link"})),"4.Push"),t.a.createElement("ul",null,t.a.createElement("li",null,t.a.createElement("p",null,"\u89e3\u51b3\u901a\u77e5\u95ee\u9898\uff1a\u7f51\u7ad9\u5185\u901a\u77e5\uff0c\u5f53\u524d\u7f51\u7ad9\u6536\u5230\u672c\u7f51\u7ad9\u7684\u6d88\u606f")),t.a.createElement("li",null,t.a.createElement("p",null,"\u6d4f\u89c8\u5668\u548c\u5e94\u7528\u670d\u52a1\u5668\u95f4\uff0c\u6dfb\u52a0 Push Service \u4e2d\u95f4\u4ee3\u7406\u5c42\uff0c\u7528\u4e8e\u6d88\u606f\u8ba2\u9605\u548c\u63a8\u9001\uff0c\u6838\u2f3c\u5b9e\u73b0\u6d41\u7a0b\uff1a"),t.a.createElement("ul",null,t.a.createElement("li",null,t.a.createElement("p",null,"Subscribe: \u5411 Push Service \u53d1\u8d77\u8ba2\u9605\uff0c\u83b7\u53d6 PushSubscription")),t.a.createElement("li",null,t.a.createElement("p",null,"Monitor: \u5b9e\u73b0\u6d4f\u89c8\u5668\u548c PushService \u901a\u4fe1 \uff08\u2f64\u6237\u79bb\u7ebf\uff0cPushSevice \u4f1a\u7ef4\u62a4\u6d88\u606f\u5217\u8868\uff09")),t.a.createElement("li",null,t.a.createElement("p",null,"Distribute Push Resource: \u5c06 PushSubscription \u4ea4\u7ed9\u670d\u52a1\u5668\uff0c\u2f64\u4e8e\u901a\u4fe1")),t.a.createElement("li",null,t.a.createElement("p",null,"Push Message: \u670d\u52a1\u7aef\u5c06\u6d88\u606f\u63a8\u9001\u7ed9 Push Service\uff0c Push Service \u63a8\u9001\u7ed9\u5bf9\u5e94\u7684\u5ba2\u6237\u7aef")))),t.a.createElement("li",null,t.a.createElement("p",null,"\u517c\u5bb9\u6027\uff1a Chrome \u6240\u4f9d\u8d56\u7684 FCM \u670d\u52a1\u5728\u56fd\u5185\u662f\u2f46\u6cd5\u8bbf\u95ee\u7684\uff0c\u2f7d Firefox \u7684\u670d\u52a1\u5728\u56fd\u5185\u53ef\u4ee5\u6b63\u5e38\u4f7f\u2f64\u3002"))),t.a.createElement("h2",{id:"5notification"},t.a.createElement(c["AnchorLink"],{to:"#5notification","aria-hidden":"true",tabIndex:-1},t.a.createElement("span",{className:"icon icon-link"})),"5.Notification"),t.a.createElement("ul",null,t.a.createElement("li",null,"\u89e3\u51b3\u6d88\u606f\u901a\u77e5\u95ee\u9898\uff1a\u7f51\u7ad9\u5916\u901a\u77e5\uff0c\u767e\u5ea6\u6536\u5230\u6dd8\u5b9d\u53d1\u9001\u7684\u901a\u77e5")))))},Zs1V:function(e){e.exports=JSON.parse("{}")}}]);