(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[178],{JjdP:function(e,n,t){"use strict";t.r(n),n["default"]={}},SZ9x:function(e,n,t){"use strict";t.r(n);var a=t("q1tI"),l=t.n(a),c=t("dEAq"),r=t("H1Ra");t("JjdP");n["default"]=e=>(l.a.useEffect((()=>{var n;null!==e&&void 0!==e&&null!==(n=e.location)&&void 0!==n&&n.hash&&c["AnchorLink"].scrollToAnchor(decodeURIComponent(e.location.hash.slice(1)))}),[]),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"markdown"},l.a.createElement("h1",{id:"\u672c\u5730\u5b58\u50a8"},l.a.createElement(c["AnchorLink"],{to:"#\u672c\u5730\u5b58\u50a8","aria-hidden":"true",tabIndex:-1},l.a.createElement("span",{className:"icon icon-link"})),"\u672c\u5730\u5b58\u50a8"),l.a.createElement("ul",null,l.a.createElement("li",null,"\u6d4f\u89c8\u5668\u5b58\u50a8\u578b\u7f13\u5b58\u5305\u542b\u4e86 Cookie\u3001Web Storage\u3001IndexedDB")),l.a.createElement("h2",{id:"1-cookie"},l.a.createElement(c["AnchorLink"],{to:"#1-cookie","aria-hidden":"true",tabIndex:-1},l.a.createElement("span",{className:"icon icon-link"})),"1. Cookie"),l.a.createElement("h3",{id:"1\u7279\u70b9"},l.a.createElement(c["AnchorLink"],{to:"#1\u7279\u70b9","aria-hidden":"true",tabIndex:-1},l.a.createElement("span",{className:"icon icon-link"})),"1\uff09\u7279\u70b9"),l.a.createElement("ul",null,l.a.createElement("li",null,"\u6700\u65e9\u88ab\u63d0\u51fa\u6765\u7684\u672c\u5730\u5b58\u50a8\u65b9\u5f0f\uff0c\u5728\u6bcf\u4e00\u6b21 http \u8bf7\u6c42\u643a\u5e26 Cookie\uff0c\u53ef\u4ee5\u5224\u65ad\u591a\u4e2a\u8bf7\u6c42\u662f\u4e0d\u662f\u540c\u4e00\u4e2a\u7528\u6237\u53d1\u8d77\u7684\uff1a",l.a.createElement("ul",null,l.a.createElement("li",null,"\u6709\u5b89\u5168\u95ee\u9898\uff0c\u5982\u679c\u88ab\u62e6\u622a\uff0c\u5c31\u53ef\u4ee5\u83b7\u5f97 Session \u6240\u6709\u4fe1\u606f\uff0c\u7136\u540e\u5c06 Cookie \u8f6c\u53d1\u5c31\u80fd\u8fbe\u5230\u76ee\u7684"),l.a.createElement("li",null,"\u6bcf\u4e2a\u57df\u540d\u4e0b\u7684 Cookie \u4e0d\u80fd\u8d85\u8fc7 20 \u4e2a\uff0c\u603b\u5927\u5c0f\u4e0d\u80fd\u8d85\u8fc7 4kb"),l.a.createElement("li",null,"Cookie \u5728\u8bf7\u6c42\u65b0\u9875\u9762\u7684\u65f6\u5019\u90fd\u4f1a\u88ab\u53d1\u9001\u8fc7\u53bb"),l.a.createElement("li",null,"Cookie \u521b\u5efa\u6210\u529f\u540d\u79f0\u5c31\u4e0d\u80fd\u4fee\u6539"),l.a.createElement("li",null,"\u8de8\u57df\u540d\u4e0d\u80fd\u5171\u4eab Cookie")))),l.a.createElement("h3",{id:"2\u5982\u679c\u8981\u8de8\u57df\u540d\u5171\u4eab-cookie-\u6709\u4e24\u4e2a\u65b9\u6cd5"},l.a.createElement(c["AnchorLink"],{to:"#2\u5982\u679c\u8981\u8de8\u57df\u540d\u5171\u4eab-cookie-\u6709\u4e24\u4e2a\u65b9\u6cd5","aria-hidden":"true",tabIndex:-1},l.a.createElement("span",{className:"icon icon-link"})),"2\uff09\u5982\u679c\u8981\u8de8\u57df\u540d\u5171\u4eab Cookie \u6709\u4e24\u4e2a\u65b9\u6cd5"),l.a.createElement("ul",null,l.a.createElement("li",null,"\u7528 Nginx \u53cd\u5411\u4ee3\u7406"),l.a.createElement("li",null,"\u5728\u4e00\u4e2a\u7ad9\u70b9\u767b\u5f55\u4e4b\u540e\uff0c\u5f80\u5176\u4ed6\u7f51\u7ad9\u5199 Cookie\u3002\u670d\u52a1\u7aef\u7684 Session \u5b58\u50a8\u5230\u4e00\u4e2a\u8282\u70b9\uff0cCookie \u5b58\u50a8 SessionId")),l.a.createElement("h3",{id:"3cookie-\u7684\u4f7f\u7528\u573a\u666f"},l.a.createElement(c["AnchorLink"],{to:"#3cookie-\u7684\u4f7f\u7528\u573a\u666f","aria-hidden":"true",tabIndex:-1},l.a.createElement("span",{className:"icon icon-link"})),"3\uff09Cookie \u7684\u4f7f\u7528\u573a\u666f"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("p",null,"\u6700\u5e38\u89c1\u7684\u5c31\u662f Cookie \u548c Session \u7ed3\u5408\u4f7f\u7528\uff0c\u5c06 SessionId \u5b58\u50a8\u5230 Cookie \u4e2d\uff0c\u6bcf\u6b21\u8bf7\u6c42\u90fd\u4f1a\u5e26\u4e0a\u8fd9\u4e2a SessionId \u8fd9\u6837\u670d\u52a1\u7aef\u5c31\u77e5\u9053\u662f\u8c01\u53d1\u8d77\u7684\u8bf7\u6c42")),l.a.createElement("li",null,l.a.createElement("p",null,"\u53ef\u4ee5\u7528\u6765\u7edf\u8ba1\u9875\u9762\u7684\u70b9\u51fb\u6b21\u6570"))),l.a.createElement("h3",{id:"4cookie-\u90fd\u6709\u54ea\u4e9b\u5b57\u6bb5"},l.a.createElement(c["AnchorLink"],{to:"#4cookie-\u90fd\u6709\u54ea\u4e9b\u5b57\u6bb5","aria-hidden":"true",tabIndex:-1},l.a.createElement("span",{className:"icon icon-link"})),"4\uff09Cookie \u90fd\u6709\u54ea\u4e9b\u5b57\u6bb5"),l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{align:"left"},"\u5b57\u6bb5(\u5355\u4f4d\u79d2)"),l.a.createElement("th",{align:"left"},"\u8bf4\u660e"))),l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",{align:"left"},l.a.createElement("code",null,"Name\u3001Size")),l.a.createElement("td",{align:"left"},"\u540d\u79f0\u3001\u5927\u5c0f")),l.a.createElement("tr",null,l.a.createElement("td",{align:"left"},l.a.createElement("code",null,"Value")),l.a.createElement("td",{align:"left"},"\u4fdd\u5b58\u7528\u6237\u767b\u5f55\u72b6\u6001\uff0c\u5e94\u8be5\u5c06\u8be5\u503c\u52a0\u5bc6\uff0c\u4e0d\u80fd\u4f7f\u7528\u660e\u6587")),l.a.createElement("tr",null,l.a.createElement("td",{align:"left"},l.a.createElement("code",null,"Path")),l.a.createElement("td",{align:"left"},"\u53ef\u4ee5\u8bbf\u95ee\u6b64 Cookie \u7684\u8def\u5f84\u3002\u6bd4\u5982 juejin.cn/editor \uff0cpath \u662f/editor\uff0c\u53ea\u6709/editor \u8fd9\u4e2a\u8def\u5f84\u4e0b\u7684\u624d\u53ef\u4ee5\u8bfb\u53d6 Cookie")),l.a.createElement("tr",null,l.a.createElement("td",{align:"left"},l.a.createElement("code",null,"httpOnly")),l.a.createElement("td",{align:"left"},"\u8868\u793a\u7981\u6b62\u901a\u8fc7 JS \u8bbf\u95ee Cookie\uff0c\u51cf\u5c11 XSS \u653b\u51fb")),l.a.createElement("tr",null,l.a.createElement("td",{align:"left"},l.a.createElement("code",null,"Secure")),l.a.createElement("td",{align:"left"},"\u53ea\u80fd\u5728 https \u8bf7\u6c42\u4e2d\u643a\u5e26")),l.a.createElement("tr",null,l.a.createElement("td",{align:"left"},l.a.createElement("code",null,"SameSite")),l.a.createElement("td",{align:"left"},"\u89c4\u5b9a\u6d4f\u89c8\u5668\u4e0d\u80fd\u5728\u8de8\u57df\u8bf7\u6c42\u4e2d\u643a\u5e26 Cookie \u51cf\u5c11 CSRF \u653b\u51fb")),l.a.createElement("tr",null,l.a.createElement("td",{align:"left"},l.a.createElement("code",null,"Domain")),l.a.createElement("td",{align:"left"},"\u57df\u540d\uff0c\u8de8\u57df\u6216\u8005 Cookie \u7684\u767d\u540d\u5355\uff0c\u5141\u8bb8\u4e00\u4e2a\u5b50\u57df\u83b7\u53d6\u6216\u64cd\u4f5c\u7236\u57df\u7684 Cookie\uff0c\u5b9e\u73b0\u5355\u70b9\u767b\u5f55\u7684\u8bdd\u4f1a\u975e\u5e38\u6709\u7528")),l.a.createElement("tr",null,l.a.createElement("td",{align:"left"},l.a.createElement("code",null,"Expires/Max-size")),l.a.createElement("td",{align:"left"},"\u6307\u5b9a\u65f6\u95f4\u6216\u79d2\u6570\u7684\u8fc7\u671f\u65f6\u95f4\uff0c\u6ca1\u8bbe\u7f6e\u7684\u8bdd\u5c31\u548c Session \u4e00\u6837\u5173\u95ed\u6d4f\u89c8\u5668\u5c31\u5931\u6548")))),l.a.createElement("h3",{id:"5\u4f7f\u7528\u65b9\u5f0f"},l.a.createElement(c["AnchorLink"],{to:"#5\u4f7f\u7528\u65b9\u5f0f","aria-hidden":"true",tabIndex:-1},l.a.createElement("span",{className:"icon icon-link"})),"5\uff09\u4f7f\u7528\u65b9\u5f0f"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("p",null,"\u5728 Cookie \u5b58\u50a8 API \u65b9\u9762\uff0c\u6d4f\u89c8\u5668\u63d0\u4f9b\u7684\u539f\u59cb API \u4f7f\u7528\u8d77\u6765\u4e5f\u4e0d\u662f\u7279\u522b\u65b9\u4fbf\uff0c\u6bd4\u5982\uff1a"),l.a.createElement(r["a"],{code:"// \u5b58\u50a8 Cookie\ndocument.cookie = 'name=juejin; domain=juejin.cn';\n// \u8bfb\u53d6 Cookie\n// \u53ea\u80fd\u901a\u8fc7 document.cookie \u8bfb\u53d6\u6240\u6709 Cookie \u5e76\u8fdb\u884c\u5b57\u7b26\u4e32\u622a\u53d6\uff0c\u975e\u5e38\u4e0d\u4fbf\n// \u5220\u9664 Cookie\nlet date = new Date();\ndate.setTime(date.getTime() - 10000); // \u8bbe\u7f6e\u4e00\u4e2a\u8fc7\u671f\u65f6\u95f4\ndocument.cookie = `name=test; domain=juejin.cn; expires=${date.toGMTString()}`;",lang:"js"})),l.a.createElement("li",null,l.a.createElement("p",null,"\u5982\u6b64\u64cd\u4f5c\u8d77\u6765\u4f1a\u7f16\u5199\u5927\u91cf\u91cd\u590d\u7cdf\u5fc3\u7684\u4ee3\u7801\uff0c\u56e0\u6b64\u5c01\u88c5 Cookie \u7684\u589e\u5220\u6539\u67e5\u64cd\u4f5c\u5341\u5206\u5fc5\u8981")),l.a.createElement("li",null,l.a.createElement("p",null,"\u63a8\u8350\u4f7f\u7528",l.a.createElement("code",null,"js-cookie")),l.a.createElement(r["a"],{code:"import Cookies from 'js-cookie';\n// \u5b58\u50a8 Cookie\nCookies.set('name', 'juejin', { domain: 'juejin.cn' });\n// \u8bfb\u53d6 Cookie\nCookies.get('name');\n// \u5220\u9664 Cookie\nCookies.remove('name');",lang:"js"}))),l.a.createElement("h2",{id:"2locastorage"},l.a.createElement(c["AnchorLink"],{to:"#2locastorage","aria-hidden":"true",tabIndex:-1},l.a.createElement("span",{className:"icon icon-link"})),"2.LocaStorage"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("p",null,"\u5c06\u4fe1\u606f\u5b58\u50a8\u5230\u672c\u5730"),l.a.createElement("ul",null,l.a.createElement("li",null,"\u5b83\u7684\u5b58\u50a8\u5927\u5c0f\u6bd4 Cookie \u5927\u5f97\u591a\uff0c\u6709 5M\uff0c\u800c\u4e14\u662f\u6c38\u4e45\u5b58\u50a8\uff0c\u9664\u975e\u4e3b\u52a8\u6e05\u7406\uff0c\u4e0d\u7136\u4f1a\u4e00\u76f4\u5b58\u5728"))),l.a.createElement("li",null,l.a.createElement("p",null,"\u5c5e\u4e8e\u6301\u4e45\u6027\u7f13\u5b58")),l.a.createElement("li",null,l.a.createElement("p",null,"\u53d7\u5230\u540c\u6e90\u7b56\u7565\u9650\u5236\uff0c\u5c31\u662f\u7aef\u53e3\u3001\u534f\u8bae\u3001\u4e3b\u673a\u5730\u5740\u6709\u4efb\u4f55\u4e00\u6837\u4e0d\u540c\u90fd\u4e0d\u80fd\u8bbf\u95ee\uff0c\u8fd8\u6709\u5728\u6d4f\u89c8\u5668\u8bbe\u4e3a\u9690\u79c1\u6a21\u5f0f\u4e0b\uff0c\u4e5f\u4e0d\u80fd\u8bfb\u53d6 LocalStorage")),l.a.createElement("li",null,l.a.createElement("p",null,"\u4f7f\u7528\u573a\u666f:"),l.a.createElement("ul",null,l.a.createElement("li",null,"\u5b58\u50a8\u7f51\u7ad9\u4e3b\u9898\u3001\u5b58\u50a8\u7528\u6237\u4fe1\u606f\u7b49"),l.a.createElement("li",null,"\u5b58\u6570\u6570\u636e\u91cf\u591a\u6216\u8005\u4e0d\u600e\u4e48\u6539\u53d8\u7684\u6570\u636e\u90fd\u53ef\u4ee5\u7528\u5b83")))),l.a.createElement("h2",{id:"3sessionstorage"},l.a.createElement(c["AnchorLink"],{to:"#3sessionstorage","aria-hidden":"true",tabIndex:-1},l.a.createElement("span",{className:"icon icon-link"})),"3.SessionStorage"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("p",null,"\u7528\u4e8e\u4e34\u65f6\u4fdd\u5b58\u540c\u4e00\u7a97\u53e3\u6216\u6807\u7b7e\u9875\u7684\u6570\u636e\uff0c\u5237\u65b0\u9875\u9762\u65f6\u4e0d\u4f1a\u5220\u9664\uff0c\u4f46\u662f\u5173\u95ed\u7a97\u53e3\u6216\u6807\u7b7e\u9875\u4e4b\u540e\u5c31\u4f1a\u5220\u9664\u8fd9\u4e9b\u6570\u636e")),l.a.createElement("li",null,l.a.createElement("p",null,"SessionStorage \u548c LocalStorage \u4e00\u6837\u662f\u5728\u672c\u5730\u5b58\u50a8\uff0c\u800c\u4e14\u90fd\u4e0d\u80fd\u88ab\u722c\u866b\u722c\u53d6\uff0c\u5e76\u4e14\u90fd\u6709\u540c\u6e90\u7b56\u7565\u7684\u9650\u5236\uff0c\u53ea\u4e0d\u8fc7 SessionStorage \u66f4\u52a0\u4e25\u683c\uff0c\u53ea\u6709\u5728\u540c\u4e00\u6d4f\u89c8\u5668\u7684\u540c\u4e00\u7a97\u53e3\u4e0b\u624d\u80fd\u5171\u4eab")),l.a.createElement("li",null,l.a.createElement("p",null,"\u4f7f\u7528\u573a\u666f:"),l.a.createElement("ul",null,l.a.createElement("li",null,"\u4e00\u822c\u662f\u5177\u6709\u65f6\u6548\u6027\u7684\uff0c\u6bd4\u5982\u5b58\u50a8\u4e00\u4e9b\u7f51\u7ad9\u7684\u6e38\u5ba2\u767b\u5f55\u4fe1\u606f\uff0c\u8fd8\u6709\u4e34\u65f6\u7684\u6d4f\u89c8\u8bb0\u5f55\u7b49")))),l.a.createElement("h2",{id:"4indexdb"},l.a.createElement(c["AnchorLink"],{to:"#4indexdb","aria-hidden":"true",tabIndex:-1},l.a.createElement("span",{className:"icon icon-link"})),"4.indexDB"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("p",null,"\u662f\u6d4f\u89c8\u5668\u672c\u5730\u6570\u636e\u5e93\uff0c\u6709\u4ee5\u4e0b\u7279\u70b9:"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("p",null,l.a.createElement("code",null,"\u952e\u503c\u5bf9\u50a8\u5b58"),"\uff1a\u5185\u90e8\u7528\u5bf9\u8c61\u4ed3\u5e93\u5b58\u653e\u6570\u636e\uff0c\u6240\u6709\u7c7b\u578b\u7684\u6570\u636e\u90fd\u53ef\u4ee5\u76f4\u63a5\u5b58\u5165\uff0c\u5305\u62ec js \u5bf9\u8c61\uff0c\u4ee5\u952e\u503c\u5bf9\u7684\u5f62\u5f0f\u4fdd\u5b58\uff0c\u6bcf\u6761\u6570\u636e\u90fd\u6709\u5bf9\u5e94\u7684\u4e3b\u952e\uff0c\u4e3b\u952e\u662f\u552f\u4e00\u7684")),l.a.createElement("li",null,l.a.createElement("p",null,l.a.createElement("code",null,"\u5f02\u6b65"),"\uff1aindexDB \u64cd\u4f5c\u65f6\u7528\u6237\u4f9d\u7136\u53ef\u80fd\u8fdb\u884c\u5176\u4ed6\u64cd\u4f5c\uff0c\u5f02\u6b65\u8bbe\u8ba1\u662f\u4e3a\u4e86\u9632\u6b62\u5927\u91cf\u6570\u636e\u7684\u8bfb\u5199\uff0c\u62d6\u6162\u7f51\u9875\u7684\u8868\u73b0")),l.a.createElement("li",null,l.a.createElement("p",null,l.a.createElement("code",null,"\u652f\u6301\u4e8b\u52a1"),"\uff1a\u6bd4\u5982\u8bf4\u4fee\u6539\u6574\u4e2a\u8868\u7684\u6570\u636e\uff0c\u4fee\u6539\u4e86\u4e00\u534a\u7684\u65f6\u5019\u62a5\u4e86\u4e2a\u9519\uff0c\u8fd9\u65f6\u5019\u4f1a\u5168\u90e8\u6062\u590d\u5230\u6ca1\u4fee\u6539\u4e4b\u5173\u7684\u72b6\u6001\uff0c\u4e0d\u5b58\u5728\u4fee\u6539\u4e00\u534a\u6210\u529f\u7684\u60c5\u51b5")),l.a.createElement("li",null,l.a.createElement("p",null,l.a.createElement("code",null,"\u540c\u6e90\u9650\u5236"),"\uff1a\u6bcf\u4e00\u4e2a\u6570\u636e\u5e93\u5e94\u521b\u5efa\u5b83\u5bf9\u5e94\u7684\u57df\u540d\uff0c\u7f51\u9875\u53ea\u80fd\u8bbf\u95ee\u81ea\u8eab\u57df\u540d\u4e0b\u7684\u6570\u636e\u5e93")),l.a.createElement("li",null,l.a.createElement("p",null,l.a.createElement("code",null,"\u5b58\u50a8\u7a7a\u95f4\u5927"),"\uff1a\u4e00\u822c\u6765\u8bf4\u4e0d\u5c11\u4e8e 250MB\uff0c\u751a\u81f3\u6ca1\u6709\u4e0a\u9650")),l.a.createElement("li",null,l.a.createElement("p",null,l.a.createElement("code",null,"\u652f\u6301\u4e8c\u8fdb\u5236\u5b58\u50a8"),"\uff1a\u6bd4\u5982 ArrayBuffer \u5bf9\u8c61\u548c Blob \u5bf9\u8c61")))),l.a.createElement("li",null,l.a.createElement("p",null,"IndexedDB \u662f\u4e00\u4e2a\u5927\u89c4\u6a21\u7684 NoSQL \u5b58\u50a8\u7cfb\u7edf"))),l.a.createElement("h2",{id:"\u4f7f\u7528"},l.a.createElement(c["AnchorLink"],{to:"#\u4f7f\u7528","aria-hidden":"true",tabIndex:-1},l.a.createElement("span",{className:"icon icon-link"})),"\u4f7f\u7528"),l.a.createElement("h3",{id:"1\u5224\u65ad\u662f\u5426\u652f\u6301"},l.a.createElement(c["AnchorLink"],{to:"#1\u5224\u65ad\u662f\u5426\u652f\u6301","aria-hidden":"true",tabIndex:-1},l.a.createElement("span",{className:"icon icon-link"})),"1\uff09\u5224\u65ad\u662f\u5426\u652f\u6301"),l.a.createElement(r["a"],{code:"if (!('indexedDB' in window)) {\n  console.log('\u6d4f\u89c8\u5668\u4e0d\u652f\u6301 indexedDB');\n  return;\n}",lang:"js"}),l.a.createElement("h3",{id:"2\u521b\u5efa\u6570\u636e\u5e93"},l.a.createElement(c["AnchorLink"],{to:"#2\u521b\u5efa\u6570\u636e\u5e93","aria-hidden":"true",tabIndex:-1},l.a.createElement("span",{className:"icon icon-link"})),"2\uff09\u521b\u5efa\u6570\u636e\u5e93"),l.a.createElement(r["a"],{code:"request.onupgradeneeded = function (e) {\n  idb = e.target.result;\n  console.log('running onupgradeneeded');\n  // \u65b0\u5efa\u5bf9\u8c61\u8868\u65f6\uff0c\u5148\u5224\u65ad\u8be5\u8868\u662f\u5426\u5b58\u5728\n  if (!idb.objectStoreNames.contains('store')) {\n    // \u521b\u5efa\u540d\u4e3a store \u7684\u8868\uff0c\u4ee5 id \u4e3a\u4e3b\u952e\n    let storeOS = idb.createObjectStore('store', { keyPath: 'id' });\n  }\n};",lang:"js"}),l.a.createElement("h3",{id:"3\u6253\u5f00\u6570\u636e\u5e93"},l.a.createElement(c["AnchorLink"],{to:"#3\u6253\u5f00\u6570\u636e\u5e93","aria-hidden":"true",tabIndex:-1},l.a.createElement("span",{className:"icon icon-link"})),"3\uff09\u6253\u5f00\u6570\u636e\u5e93"),l.a.createElement(r["a"],{code:"let idb;\n\n// \u6253\u5f00\u540d\u4e3a sql\uff0c\u7248\u672c\u53f7\u4e3a 1 \u7684\u6570\u636e\u5e93\uff0c\u5982\u679c\u4e0d\u5b58\u5728\u5219\u81ea\u52a8\u521b\u5efa\nlet request = window.indexedDB.open('sql', 1);\n\n// \u9519\u8bef\u56de\u8c03\nrequest.onerror = function (event) {\n  console.log('\u6253\u5f00\u6570\u636e\u5e93\u5931\u8d25');\n};\n\n// \u6210\u529f\u56de\u8c03\nrequest.onsuccess = function (event) {\n  idb = request.result;\n  console.log('\u6253\u5f00\u6570\u636e\u5e93\u6210\u529f');\n};",lang:"js"}),l.a.createElement("h3",{id:"4\u65b0\u589e\u6570\u636e"},l.a.createElement(c["AnchorLink"],{to:"#4\u65b0\u589e\u6570\u636e","aria-hidden":"true",tabIndex:-1},l.a.createElement("span",{className:"icon icon-link"})),"4\uff09\u65b0\u589e\u6570\u636e"),l.a.createElement(r["a"],{code:"// \u65b0\u589e\u65b9\u6cd5\nfunction addItem(item) {\n  // \u65b0\u589e\u65f6\u5fc5\u987b\u6307\u5b9a\u8868\u540d\u548c\u64cd\u4f5c\u6a21\u5f0f\n  let transaction = idb.transaction(['store'], 'readwrite');\n  // \u83b7\u53d6\u8868\u5bf9\u8c61\n  let store = transaction.objectStore('store');\n  // \u8c03\u7528 add \u65b9\u6cd5\u65b0\u589e\u6570\u636e\n  store.add(item);\n}\nlet data = {\n  id: 1, // \u4e3b\u952e id\n  name: 'test',\n  age: '18',\n};\naddItem(data); // \u8c03\u7528\u65b0\u589e\u65b9\u6cd5",lang:"js"}),l.a.createElement("h3",{id:"5\u67e5\u8be2\u6570\u636e"},l.a.createElement(c["AnchorLink"],{to:"#5\u67e5\u8be2\u6570\u636e","aria-hidden":"true",tabIndex:-1},l.a.createElement("span",{className:"icon icon-link"})),"5\uff09\u67e5\u8be2\u6570\u636e"),l.a.createElement(r["a"],{code:"// \u8bfb\u53d6\u65b9\u6cd5\nfunction readItem(id) {\n  // \u521b\u5efa\u4e8b\u52a1\uff0c\u6307\u5b9a\u8868\u540d\n  let transaction = idb.transaction(['store']);\n  // \u83b7\u53d6\u8868\u5bf9\u8c61\n  let store = transaction.objectStore('store');\n  // \u8c03\u7528 get \u65b9\u6cd5\u83b7\u53d6\u6570\u636e\n  let requestStore = store.get(id);\n  requestStore.onsuccess = function () {\n    if (requestStore.result) {\n      console.log(requestStore.result); // { id: 1, name: 'test', age: '18' }\n    }\n  };\n}\nreadItem(1); // \u83b7\u53d6\u4e3b\u952e id \u4e3a 1 \u7684\u6570\u636e",lang:"js"}))))},Zs1V:function(e){e.exports=JSON.parse("{}")}}]);